@charset "UTF-8";
/* [ʞ] serenity.scss <https://hale.su/serenity.html>
 *  ~ lexi hale <lexi@hale.su>
 *  © GNU affero general public license
 *  $ sassc -t compressed serenity.{scss,css}

 * a stylesheet designed for flexibility and for minimalistic,
 * hand-coded websites. ideally, it should be possible to
 * drop it right into any existing plain-html document and
 * have it immediately spice up the look.

 NOTE i'm fine with people other than me using and modifying
      this stylesheet under the terms of the AGPL, under two
	  conditions:

	    1) this block-comment be left in place per the AGPL,
		   and at least the first three lines copied verbatim
		   to the top of any CSS file generated from it

		2) you change the default hue in :root to something
		   other than rose-red, which is the signature hue
		   of my own websites

	  i would also appreciate being credited somewhere
	  visible to visitors of the website, but it's not
	  required as long as the credit at the top of this
	  file is preserved. */
/* bring in a fallback font in case the user doesn't have
 * a garamond on hand */
/* imported from google stylesheet to reduce tracking
 * original: https://fonts.googleapis.com/css?family=EB+Garamond&display=swap
 */
/* cyrillic-ext */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR4SDktYw.woff2) format("woff2");
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F; }

/* cyrillic */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GRxSDktYw.woff2) format("woff2");
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116; }

/* greek-ext */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR5SDktYw.woff2) format("woff2");
  unicode-range: U+1F00-1FFF; }

/* greek */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR2SDktYw.woff2) format("woff2");
  unicode-range: U+0370-03FF; }

/* vietnamese */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR6SDktYw.woff2) format("woff2");
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB; }

/* latin-ext */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR7SDktYw.woff2) format("woff2");
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF; }

/* latin */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR1SDk.woff2) format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }

/* cyrillic-ext */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR4SDktYw.woff2) format("woff2");
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F; }

/* cyrillic */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GRxSDktYw.woff2) format("woff2");
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116; }

/* greek-ext */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR5SDktYw.woff2) format("woff2");
  unicode-range: U+1F00-1FFF; }

/* greek */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR2SDktYw.woff2) format("woff2");
  unicode-range: U+0370-03FF; }

/* vietnamese */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR6SDktYw.woff2) format("woff2");
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB; }

/* latin-ext */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR7SDktYw.woff2) format("woff2");
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF; }

/* latin */
@font-face {
  font-family: 'EB Garamond';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local("EB Garamond Regular"), local("EBGaramond-Regular"), url(https://fonts.gstatic.com/s/ebgaramond/v10/SlGUmQSNjdsmc35JDF1K5GR1SDk.woff2) format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }

@font-face {
  /* if there's any japanese text in the document,
	 * do what we can to make sure it's not hideous */
  font-family: "mincho";
  unicode-range: u+4e00-9fbf, u+3040-309f, u+30a0-30ff;
  src: local("Kochi Mincho"), local("Hiragino Mincho Pro"), local("Yu Mincho"), local("MS Mincho"); }

:root {
  --hue: 338;
  --width: 30em;
  --bright: 12%;
  --link-br: 73%;
  --hover: 22%; }

::selection {
  background-color: hsl(var(--hue), 100%, 60%);
  color: white; }

body {
  margin-top: 1em;
  padding: 0 1em;
  font-family: mincho, "GaramondNo8", "Garamond Premier Pro", "EB Garamond", serif;
  font-size: 14pt;
  hanging-punctuation: first last force-end;
  text-align: justify;
  /* browser specific hacks */ }
  @media print {
    body {
      --faint-color: #666;
      color: black; } }
  @media screen {
    body {
      --fg-color: hsl(var(--hue),100%,89%);
      --bg-color: hsl(var(--hue),84%,var(--bright));
      --faint-color: hsl(var(--hue),64%,64%);
      max-width: var(--width);
      margin: auto;
      margin-top: 1em;
      background: var(--bg-color);
      color: var(--fg-color); } }
  body::-webkit-scrollbar {
    width: 30px; }
  body::-webkit-scrollbar-track {
    background: linear-gradient(to right, var(--bg-color) 30%, hsl(var(--hue), 100%, calc(var(--bright) / 2)) 100%); }
  body::-webkit-scrollbar-thumb {
    background: url(/res/scroller.svg), hsl(var(--hue), 100%, 21%);
    background-size: 70%;
    background-repeat: no-repeat;
    background-position: center;
    border-radius: 6px 0 0 6px;
    border-left: 1px outset hsl(var(--hue), 60%, 30%); }
    body::-webkit-scrollbar-thumb:hover {
      background-color: hsl(var(--hue), 100%, 28%);
      border-color: hsl(var(--hue), 60%, 40%); }

img {
  max-height: 100vh; }

h1, h2, h3, h4, h5, h6 {
  /* sigh */
  all: unset;
  display: block;
  line-height: 1em;
  margin-top: 0.3em; }
  @media screen {
    h1 a[href], h2 a[href], h3 a[href], h4 a[href], h5 a[href], h6 a[href] {
      text-decoration: none;
      color: hsl(var(--hue), 60%, 80%); }
      h1 a[href]:hover, h2 a[href]:hover, h3 a[href]:hover, h4 a[href]:hover, h5 a[href]:hover, h6 a[href]:hover {
        color: var(--fg-color); } }

h1 {
  font-size: 2em; }

h2 {
  font-size: 1.5em; }

h3 {
  font-size: 1.3333333333em; }

h4 {
  font-size: 1.25em; }

h5 {
  font-size: 1.2em; }

@media screen {
  /* dim the pathbar */
  h1 a[href], h3 a[href] {
    color: hsl(var(--hue), 50%, 70%); } }

p {
  margin: 0.7em 0;
  line-height: 1.4em; }

del {
  color: var(--faint-color);
  text-decoration-color: hsl(var(--hue), 80%, 60%); }

@media print {
  a[href] {
    color: black; } }

@media screen {
  a[href] {
    /* define the numbers */
    --link-t: var(--hue), 100%, var(--link-br);
    --hi-t: var(--hue), 100%, calc(var(--link-br) + var(--hover));
    /* define the two alpha variants */
    --link-c: hsl(var(--link-t));
    --ul-c: hsla(var(--link-t), 30%);
    --hi-c: hsl(var(--hi-t));
    --ul-hi-c: hsla(var(--hi-t), 60%);
    --glow-c: hsla(var(--link-t), 50%);
    color: var(--link-c);
    text-decoration-color: var(--ul-c);
    text-decoration-width: 1px;
    text-underline-offset: 2px; }
    p a[href]:focus, li a[href]:focus, span a[href]:focus, h1 a[href]:focus, h2 a[href]:focus, h3 a[href]:focus, p a[href]:hover:focus, li a[href]:hover:focus, span a[href]:hover:focus, h1 a[href]:hover:focus, h2 a[href]:hover:focus, h3 a[href]:hover:focus {
      /* a11y: keyboard users need an unambiguous, easy-to
			 * spot identifier for what's currently focused. this
			 * style inverts the default colors to create a highly-
			 * visible reverse-video effect. */
      color: var(--bg-color) !important;
      background: var(--fg-color) !important;
      box-shadow: 0 0 30px var(--ul-c);
      text-decoration: none;
      /* the box is very "bleeding-edge" sharp by default so
			 * we use padding to give it some white space; otherwise
			 * it'll look *exactly* like terminal reverse video */
      padding: 0.2em 0.3em;
      /* the extra padding will disrupt layout sometimes; let's
			 * avoid that where we can*/
      margin: 0 -0.3em;
      /* browsers normally supply their own (ugly, useless) 
			 * indicator; we suppress these by blanking outline */
      outline: none; }
    a[href]:hover, a[href]:active {
      color: var(--hi-c);
      text-decoration: underline;
      text-decoration-color: var(--ul-hi-c);
      text-shadow: 0px 0px 30px var(--glow-c);
      background: none !important;
      box-shadow: none; } }

div.dir > div {
  /* for div-type directory lists */
  margin-left: 2em;
  text-indent: -2em; }
  div.dir > div > *:first-child {
    font-weight: bold; }

ol, ul {
  padding-left: 1.2em;
  list-style: none;
  line-height: 1.4em; }
  ol ol, ol ul, ol li, ul ol, ul ul, ul li {
    margin-top: 0.5em; }
  ol li > a[href]:first-child, ul li > a[href]:first-child {
    display: inline-block; }
  ol li::before, ul li::before {
    display: inline-block;
    color: hsl(var(--hue), 40%, 60%); }
  ol.dir > li, ul.dir > li {
    margin-left: 2em; }
    ol.dir > li::before, ul.dir > li::before {
      margin-left: -2em; }
    ol.dir > li > *:first-child, ul.dir > li > *:first-child {
      font-weight: bold; }

ul li::before {
  hanging-punctuation: none;
  content: "»";
  width: 0.7em;
  margin-left: -0.7em; }

ol {
  counter-reset: li; }
  ol li::before {
    counter-increment: li;
    content: counter(li);
    width: 1.5em;
    margin-left: -1.9em;
    text-align: right;
    padding-right: 0.4em; }

.byline {
  margin-left: 1.5em;
  margin-top: -0.5;
  padding: 0em;
  font-style: italic;
  color: var(--faint-color); }

hr {
  border: none;
  border-bottom: 1px solid hsl(var(--hue), 50%, 30%);
  width: 90%; }
  hr[data-dec]::before {
    display: block;
    content: attr(data-dec);
    position: relative;
    letter-spacing: 1em;
    text-align: center;
    top: 0.8em;
    color: hsl(var(--hue), 50%, 40%);
    font-size: 60%; }
  hr[data-dec=""]::before {
    content: "◆"; }

.imgbox {
  margin: 0 calc((20vw - 20%) * -1);
  break-inside: avoid; }

/* entries in definition lists, numbered footnotes */
.entry {
  margin-left: 1em;
  text-indent: -1em; }

/* links to previous and next chapter */
nav {
  padding-bottom: 1em;
  /* hideous evil clearfix */ }
  @media print {
    nav {
      display: none; } }
  nav::after {
    display: table;
    content: "";
    /* ಠ_ಠ */
    clear: both; }
  nav a[href] {
    --fg-color: hsl(var(--hue), 100%, 80%);
    display: block;
    color: var(--fg-color);
    background-color: hsl(var(--hue), 100%, calc(var(--bright) / 2));
    border: 1px solid var(--fg-color);
    text-decoration: none;
    line-height: .7em;
    transition-property: border-color, text-shadow, color, --fg-color, background;
    transition-duration: 0.2s;
    /* back and forward buttons */ }
    nav a[href]:hover {
      --fg-color: hsl(var(--hue),80%,90%);
      background: hsl(var(--hue), 70%, 10%) !important;
      text-decoration: none; }
    nav a[href]:active, nav a[href]:focus {
      padding: 0;
      margin: 0; }
    nav a[href].next::after, nav a[href].prev::before {
      display: inline-block;
      color: var(--bg-color);
      font-weight: bold;
      background-color: var(--fg-color);
      padding: 1.7ex 1.5ex;
      text-shadow: none;
      transition-property: background-color, --fg-color;
      transition-duration: 0.2s; }
    nav a[href].next {
      float: right;
      padding-left: 2ex;
      border-radius: 0 0 0 10px; }
      nav a[href].next::after {
        margin-left: 2ex;
        content: "⮞"; }
    nav a[href].prev {
      float: left;
      padding-right: 2ex;
      border-radius: 0 0 10px 0; }
      nav a[href].prev::before {
        margin-right: 2ex;
        content: "⮜"; }

/* endnote mechanism */
@media screen {
  a.endnote-link[href], a.endnote-link[href]:focus {
    text-decoration: none;
    color: var(--fg-color);
    background-color: hsl(var(--hue), 60%, 25%);
    padding: 0.2em 0.4em;
    /* the following two stanzas are unfortunately
			 * necessary and i don't know why; trying to
			 * incorporate them into one consistently
			 * breaks cross-browser. shruggo */
    --border-color: hsl(var(--hue),80%,8%);
    border: 1px solid var(--border-color); }
  a[href].endnote-link:hover {
    background-color: hsl(var(--hue), 76%, 35%) !important;
    /* i don't know why the hell the !important is
				   needed, and the inspector won't tell me */ }
  .endnote {
    position: fixed;
    bottom: 0.5em;
    display: none;
    border: 1px solid rgba(255, 255, 255, 0.5);
    background-color: hsl(var(--hue), 61%, 15%);
    --box-shadow-color: hsla(var(--hue),54%,30%,0.7);
    box-shadow: 0 0 40px 0 var(--box-shadow-color);
    padding: .5em 1em;
    /* center the element */
    left: 0;
    right: 0;
    max-width: 30em;
    /* same width as body */
    margin: auto; }
    .endnote:target {
      display: block; }
    .endnote .entry {
      margin-left: 0em;
      text-indent: -0.5em; }
    .endnote .ui {
      /* hover it over the corner of the interface */
      position: absolute;
      top: -1.2em;
      right: -1em;
      background-color: hsl(var(--hue), 51%, 5%);
      border: 1px solid rgba(255, 255, 255, 0.5);
      padding: 0.1em .5em; }
      .endnote .ui a[href] {
        text-decoration: none;
        font-weight: bold; } }

@media print {
  .endnote .ui {
    display: none; }
  a[href].endnote-link {
    text-decoration: none; } }
